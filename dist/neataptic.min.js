/*!
 * The MIT License (MIT)
 * 
 * Copyright 2017 Thomas Wagenaar
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE
 * 
 */
!function(t){function n(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var o={};n.m=t,n.c=o,n.i=function(t){return t},n.d=function(t,o,e){n.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=13)}([function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,o){var e,i,s={Activation:o(6),Mutation:o(11),Selection:o(12),Crossover:o(10),Cost:o(9)};e=[],void 0!==(i=function(){return s}.apply(n,e))&&(t.exports=i),void 0!==t&&t.exports&&(t.exports=s),"object"==typeof window&&(!function(){var t=window.methods;s.ninja=function(){return window.methods=t,s}}(),window.methods=s)},function(t,n,o){(function(t){function n(t){this.bias="input"==t?0:.2*Math.random()-.1,this.squash=s.LOGISTIC,this.type=t||"hidden",this.activation=0,this.connections={in:[],out:[]},this.error={responsibility:0,projected:0},this.trace={elegibility:{}}}t&&(t.exports=n);var e=o(1),i=o(5),s=e.Activation,r=e.Mutation;n.prototype={activate:function(t){if(void 0!==t)return this.activation=t,this.derivative=0,this.bias=0,this.activation;this.state=this.bias;for(n in this.connections.in)this.state+=this.connections.in[n].from.activation*this.connections.in[n].weight;this.activation=this.squash(this.state),this.derivative=this.squash(this.state,!0);for(var n in this.connections.in){var t=this.connections.in[n];this.trace.elegibility[n]=t.from.activation}return this.activation},propagate:function(t,n){var o=0;if("output"==this.type)this.error.responsibility=this.error.projected=n-this.activation;else{for(var e in this.connections.out){var e=this.connections.out[e];o+=e.to.error.responsibility*e.weight}this.error.projected=this.derivative*o,this.error.responsibility=this.error.projected}t=t||.1;for(var e in this.connections.in){var i=this.connections.in[e],s=this.error.projected*this.trace.elegibility[e];i.weight+=t*s}this.bias+=t*this.error.responsibility},connect:function(t){var n=new i(this,t);return this.connections.out.push(n),t.connections.in.push(n),n},disconnect:function(t,n){n=n||!1;for(var o in this.connections.out){var e=this.connections.out[o];if(e.to==t){this.connections.out.splice(o,1);var i=e.to.connections.in.indexOf(e);e.to.connections.in.splice(i,1);break}}n&&t.disconnect(this)},mutate:function(t){if(void 0===t)throw new Error("No mutate method given!");if(!t.name in e.Mutation)throw new Error("This method does not exist!");switch(t){case r.MOD_ACTIVATION:for(var n=Math.floor(Math.random()*r.MOD_ACTIVATION.config.allowed.length);r.MOD_ACTIVATION.config.allowed[n]==this.squash;)n=Math.floor(Math.random()*r.MOD_ACTIVATION.config.allowed.length);this.squash=r.MOD_ACTIVATION.config.allowed[n];break;case r.MOD_BIAS:var o=Math.random()*(r.MOD_BIAS.config.max-r.MOD_BIAS.config.min)+r.MOD_BIAS.config.min;this.bias+=o}},isProjectingTo:function(t){for(conn in this.connections.out)if(conn=this.connections.out[conn],conn.to==t)return!0;return!1},isProjectedBy:function(t){for(conn in this.connections.in)if(conn=this.connections.in[conn],conn.from==t)return!0;return!1},toJSON:function(){return{ID:this.ID,bias:this.bias,type:this.type,squash:this.squash.name}}},n.fromJSON=function(t){var o=new n;o.ID=t.ID,o.bias=t.bias,o.type=t.type;for(squash in s)if(s[squash].name==t.squash){o.squash=s[squash];break}return o}}).call(n,o(0)(t))},function(t,n,o){(function(t){function n(t,n){if(void 0===t||void 0===n)throw new Error("No input or output size given");this.input=t,this.output=n,this.nodes=[],this.connections=[];for(var o=0;o<this.input+this.output;o++){var i=o<this.input?"input":"output";this.nodes.push(new e(i,this.nodes.length))}for(var o=0;o<this.input;o++)for(var s=this.input;s<this.output+this.input;s++)this.connect(this.nodes[o],this.nodes[s])}t&&(t.exports=n);var e=o(2),i=o(5),s=o(1),r=s.Activation,a=s.Mutation;n.prototype={activate:function(t){var n=[];for(node in this.nodes)switch(this.nodes[node].type){case"input":this.nodes[node].activate(t[node]);break;case"hidden":this.nodes[node].activate();break;case"output":var o=this.nodes[node].activate();n.push(o)}return n},propagate:function(t,n){this.nodes.reverse();for(node in this.nodes)switch(this.nodes[node].type){case"hidden":this.nodes[node].propagate(t);break;case"output":this.nodes[node].propagate(t,n[node])}this.nodes.reverse()},connect:function(t,n){var o=t.connect(n);return this.connections.push(o),o},disconnect:function(t,n){for(conn in this.connections)if(this.connections[conn].from==t&&this.connections[conn].to==n){this.connections.splice(conn,1);break}t.disconnect(n)},mutate:function(t){if(void 0===t)throw new Error("No mutate method given!");if(!t.name in s.Mutation)throw new Error("This method does not exist!");switch(t){case a.ADD_NODE:var n=this.connections[Math.floor(Math.random()*this.connections.length)];this.disconnect(n.from,n.to);var o=this.nodes.indexOf(n.to),i=new e("hidden",this.nodes.length);i.mutate(a.MOD_ACTIVATION);var r=Math.min(o,this.nodes.length-this.output);this.nodes.splice(r,0,i),this.connect(n.from,i),this.connect(i,n.to);break;case a.SUB_NODE:if(this.nodes.length==this.input+this.output){a.config.warnings&&console.warn("No more nodes left to remove!");break}for(var c=Math.floor(Math.random()*(this.nodes.length-this.output-this.input)+this.input),i=this.nodes[c],h=[],u=i.connections.in.length-1;u>=0;u--){var f=i.connections.in[u].from;h.push(f),this.disconnect(f,i)}for(var d=[],u=i.connections.out.length-1;u>=0;u--){var p=i.connections.out[u].to;d.push(p),this.disconnect(i,p)}for(var f in h){f=h[f];for(var p in d)p=d[p],f.isProjectingTo(p)||this.connect(f,p)}this.nodes.splice(c,1);break;case a.ADD_CONN:for(var l=0,v=0;v<this.nodes.length;v++)"input"==this.nodes[v].type?l+=this.nodes.length-this.input:"hidden"==this.nodes[v].type&&(l+=this.nodes.length-(v+1));if(l<=this.connections.length){a.config.warnings&&console.warn("Maximum amount of connections reached!");break}for(var m=!0;m;){m=!1;var g=Math.floor(Math.random()*(this.nodes.length-this.output)),O=this.nodes[g],r=Math.max(g+1,this.input),w=this.nodes[Math.floor(Math.random()*(this.nodes.length-r)+r)];for(u in this.connections)if(this.connections[u].from==O&&this.connections[u].to==w){m=!0;break}}this.connect(O,w);break;case a.SUB_CONN:var M=[];for(u in this.connections)u=this.connections[u],u.from.connections.out.length>1&&u.to.connections.in.length>1&&M.push(u);if(0==M.length){a.config.warnings&&console.warn("No connections to remove!");break}var I=M[Math.floor(Math.random()*M.length)];this.disconnect(I.from,I.to);break;case a.MOD_WEIGHT:var n=this.connections[Math.floor(Math.random()*this.connections.length)],N=Math.random()*(a.MOD_WEIGHT.config.max-a.MOD_WEIGHT.config.min)+a.MOD_WEIGHT.config.min;n.weight+=N;break;case a.MOD_BIAS:var c=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),i=this.nodes[c];i.mutate(a.MOD_BIAS);break;case a.MOD_ACTIVATION:var c=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),i=this.nodes[c];i.mutate(a.MOD_ACTIVATION)}},graph:function(t,n,o){var o=o||100,e=1,i=1,s={nodes:[],links:[],constraints:[{type:"alignment",axis:"x",offsets:[]},{type:"alignment",axis:"y",offsets:[]}],main:{maxActivation:0,maxWeight:0}};for(index in this.nodes){var a=this.nodes[index],c="input"==a.type?0:"output"==a.type?1:a.squash==r.LOGISTIC?2:a.squash==r.TANH?3:a.squash==r.IDENTITY?4:a.squash==r.HLIM?5:a.squash==r.RELU?6:a.squash==r.SOFTSIGN?7:a.squash==r.SINUSOID?8:a.squash==r.GAUSSIAN?9:a.squash==r.SOFTPLUS?10:a.squash==r.BENT_IDENTITY?11:null;0==c?(s.constraints[0].offsets.push({node:index,offset:(t-o)/this.input*e}),s.constraints[1].offsets.push({node:index,offset:0}),e++):1==c&&(s.constraints[0].offsets.push({node:index,offset:(t-o)/(this.output+1)*i}),s.constraints[1].offsets.push({node:index,offset:-(n-o)/2}),i++),a.activation>s.main.maxActivation&&(s.main.maxActivation=a.activation),s.nodes.push({id:index,type:c,activation:a.activation})}for(connection in this.connections)connection=this.connections[connection],s.links.push({source:this.nodes.indexOf(connection.from),target:this.nodes.indexOf(connection.to),weight:connection.weight}),connection.weight>s.main.maxWeight&&(s.main.maxWeight=connection.weight);return s},toJSON:function(){var t={nodes:[],connections:[],input:this.input,output:this.output};for(index in this.nodes){var n=this.nodes[index].toJSON();n.index=index,t.nodes.push(n)}for(o in this.connections){var o=this.connections[o],e=o.toJSON();e.from=this.nodes.indexOf(o.from),e.to=this.nodes.indexOf(o.to),t.connections.push(e)}return t}},n.fromJSON=function(t){var o=new n(t.input,t.output);o.nodes=[],o.connections=[];for(node in t.nodes)o.nodes.push(e.fromJSON(t.nodes[node]));for(i in t.connections){var i=t.connections[i],s=o.connect(o.nodes[i.from],o.nodes[i.to]);s.weight=i.weight,s.ID=i.id}return o},n.merge=function(t,o){if(t=n.fromJSON(t.toJSON()),o=n.fromJSON(o.toJSON()),t.output!=o.input)throw new Error("Output size of network1 should be the same as the input size of network2!");for(conn in o.connections)if(conn=o.connections[conn],"input"==conn.from.type){var e=o.nodes.indexOf(conn.from);o.nodes[e];conn.from=t.nodes[t.nodes.length-1-e]}for(var i=t.nodes.length-1-t.output;i<t.nodes.length;i++)t.nodes[i].type="hidden";return t.connections=t.connections.concat(o.connections),t.nodes=t.nodes.concat(o.nodes),t},n.crossOver=function(t,o,e){if(void 0===e)throw new Error("No mutate method given!");if(!e.name in s.Crossover)throw new Error("This method does not exist!");if(t.input!=o.input||t.output!=o.output)throw new Error("Networks don't have the same input/output size!");var r=new n(t.input,t.output);r.connections=[],r.nodes=[];var a=t.score||0,c=o.score||0;if(t=n.fromJSON(t.toJSON()),o=n.fromJSON(o.toJSON()),a==c)var h=Math.max(t.nodes.length,o.nodes.length),u=Math.min(t.nodes.length,o.nodes.length),f=Math.floor(Math.random()*(h-u+1)+u);else if(a>c)var f=t.nodes.length;else var f=o.nodes.length;for(var d=0;d<f;d++)if(d<t.nodes.length&&d<o.nodes.length){var p=null;if(d>=f-t.output)for(;null==p||"output"!=p.type;)p=Math.random()>=.5?t.nodes[d]:o.nodes[d];else for(;null==p||d<f-t.output&&"output"==p.type;)p=Math.random()>=.5?t.nodes[d]:o.nodes[d];r.nodes.push(p)}else d<t.nodes.length?d>=f-t.output?r.nodes.push(t.nodes[t.nodes.length-(d-(f-t.output-1))]):r.nodes.push(t.nodes[d]):d<o.nodes.length&&(d>=f-t.output?r.nodes.push(o.nodes[o.nodes.length-(d-(f-t.output-1))]):r.nodes.push(o.nodes[d]));for(p in r.nodes)r.nodes[p].connections={in:[],out:[]};var l={},v={};for(m in t.connections){var m=t.connections[m],g={weight:m.weight,from:t.nodes.indexOf(m.from),to:t.nodes.indexOf(m.to)};if(g.to==t.nodes.length-1){if(!(g.from<f-1))continue;g.to=f-1}var O=i.innovationID(g.from,g.to);l[O]=g}for(m in o.connections){var m=o.connections[m],g={weight:m.weight,from:o.nodes.indexOf(m.from),to:o.nodes.indexOf(m.to)};if(g.to==o.nodes.length-1){if(!(g.from<f-1))continue;g.to=f-1}var O=i.innovationID(g.from,g.to);v[O]=g}var w={};for(var O in l)O in v&&(w[O]=[l[O],v[O]],delete l[O],delete v[O]);var M=[];for(m in w){var m=Math.random()>=.5?w[m][0]:w[m][1];M.push(m)}if(a==c){for(m in l)M.push(l[m]);for(m in v)M.push(v[m])}else if(a>c)for(m in l)M.push(l[m]);else for(m in v)M.push(v[m]);for(m in M){var I=M[m];if(I.to<f){var N=r.nodes[I.from];if("output"!=N.type){var S=r.nodes[I.to],m=r.connect(N,S);m.weight=I.weight}}}return r},n.distance=function(t,n,o){var e=0,s={},r={};for(a in t.connections){var a=t.connections[a],c={weight:a.weight,from:t.nodes.indexOf(a.from),to:t.nodes.indexOf(a.to)},h=i.innovationID(c.from,c.to);s[h]=c}for(a in n.connections){var a=n.connections[a],c={weight:a.weight,from:n.nodes.indexOf(a.from),to:n.nodes.indexOf(a.to)},h=i.innovationID(c.from,c.to);r[h]=c}var u={};for(var h in s)h in r&&(u[h]=[s[h],r[h]],delete s[h],delete r[h]);e+=(Object.keys(s).length+Object.keys(r).length)/((t.connections.length+n.connections.length)/2)*o[0];var f=0;for(a in t.connections)f+=t.connections[a].weight;f/=t.connections.length;var d=0;for(a in n.connections)d+=n.connections[a].weight;d/=n.connections.length,e+=Math.abs(f-d)*o[1];var p=0;for(node in t.nodes){if(node>=n.nodes.length)break;t.nodes[node].squash!=n.nodes[node].squash&&(p+=1)}return e+=p/((t.nodes.length+n.nodes.length)/2)*o[2]}}).call(n,o(0)(t))},function(t,n,o){(function(t){function n(t,n){n=n||{},this.network=t,this.rate=n.rate||.2,this.iterations=n.iterations||1e5,this.error=n.error||.005,this.cost=n.cost||null,this.crossValidate=n.crossValidate||null}t&&(t.exports=n);var e=o(1),i=e.Cost;n.prototype={train:function(t,n){function o(t){for(var n,o,e=t.length;e;n=Math.floor(Math.random()*e),o=t[--e],t[e]=t[n],t[n]=o);return t}var e,s,r,a=1,c=p=0,h=!1,u=n&&n.cost||this.cost||i.MSE,f=!1,d=Date.now();if(n&&(n.shuffle,n.iterations&&(this.iterations=n.iterations),n.error&&(this.error=n.error),n.rate&&(this.rate=n.rate),n.cost&&(this.cost=n.cost),n.schedule&&(this.schedule=n.schedule),(this.crossValidate||n.crossValidate)&&(this.crossValidate||(this.crossValidate={}),f=!0,n.crossValidate.testSize&&(this.crossValidate.testSize=n.crossValidate.testSize),n.crossValidate.testError&&(this.crossValidate.testError=n.crossValidate.testError))),e=this.rate,Array.isArray(this.rate))var p=Math.floor(this.iterations/this.rate.length);if(f){var l=Math.ceil((1-this.crossValidate.testSize)*t.length);r=t.slice(0,l),s=t.slice(l)}for(;!h&&c<this.iterations&&a>this.error&&!(f&&a<=this.crossValidate.testError);){if(c++,"function"==typeof this.rate&&(e=this.rate(c,a)),a=0,p>0){var v=Math.floor(c/p);e=this.rate[v]||e}f?(this._trainSet(r,e,u),a+=this.test(s).error):(a+=this._trainSet(t,e,u),a/=t.length),n&&(this.schedule&&this.schedule.every&&c%this.schedule.every==0?h=this.schedule.do({error:a,iterations:c,rate:e}):n.log&&c%n.log==0&&console.log("iterations",c,"error",a,"rate",e),n.shuffle&&o(t))}return{error:a,iterations:c,time:Date.now()-d}},trainAsync:function(t,n){var o=this.workerTrain.bind(this);return new Promise(function(e,i){try{o(t,e,n,!0)}catch(t){i(t)}})},_trainSet:function(t,n,o){var e=0;for(var i in t){var s=t[i].input,r=t[i].output,a=this.network.activate(s);this.network.propagate(n,r),e+=o(r,a)}return e},test:function(t,n){var o,e,s,r=0,a=n&&n.cost||this.cost||i.MSE,c=Date.now();for(var h in t)o=t[h].input,s=t[h].output,e=this.network.activate(o),r+=a(s,e);return r/=t.length,{error:r,time:Date.now()-c}},workerTrain:function(t,n,o,e){e||console.warn("Deprecated: do not use `workerTrain`, use `trainAsync` instead.");var i=this;this.network.optimized||this.network.optimize();var s=this.network.worker(this.network.optimized.memory,t,o);s.onmessage=function(t){switch(t.data.action){case"done":var e=t.data.message.iterations,r=t.data.message.error,a=t.data.message.time;i.network.optimized.ownership(t.data.memoryBuffer),n({error:r,iterations:e,time:a}),s.terminate();break;case"log":console.log(t.data.message);case"schedule":if(o&&o.schedule&&"function"==typeof o.schedule.do){(0,o.schedule.do)(t.data.message)}}},s.postMessage({action:"startTraining"})}}}).call(n,o(0)(t))},function(t,n,o){(function(t){function n(t,n){this.weight=.2*Math.random()-.1,this.from=t,this.to=n}t&&(t.exports=n),n.prototype={toJSON:function(){return{weight:this.weight,id:this.ID}}},n.innovationID=function(t,n){return.5*(t+n)*(t+n+1)+n}}).call(n,o(0)(t))},function(t,n,o){(function(t){var n={LOGISTIC:function(t,o){if(!o)return 1/(1+Math.exp(-t));var e=n.LOGISTIC(t);return e*(1-e)},TANH:function(t,o){return o?1-Math.pow(n.TANH(t),2):Math.tanh(t)},IDENTITY:function(t,n){return n?1:t},HLIM:function(t,n){return n?1:t>0?1:0},RELU:function(t,n){return n?t>0?1:0:t>0?t:0},SOFTSIGN:function(t,n){var o=1+Math.abs(t);return n?t/Math.pow(o,2):t/o},SINUSOID:function(t,n){return n?Math.cos(t):Math.sin(t)},GAUSSIAN:function(t,n){var o=Math.exp(-Math.pow(t,2));return n?-2*t*o:o},SOFTPLUS:function(t,o){return o?n.LOGISTIC(t):Math.log(1+Math.exp(t))},BENT_IDENTITY:function(t,n){var o=Math.sqrt(Math.pow(t,2)+1);return n?t/(2*o)+1:(o-1)/2+t}};t&&(t.exports=n)}).call(n,o(0)(t))},function(t,n,o){(function(t){var n=o(3),e=o(1),i=o(2),s=o(4),r={Construct:function(t){var o=new n(0,0);for(var e in t)t[e].connections.out.length?t[e].connections.in.length||(t[e].type="input",o.input++):(t[e].type="output",o.output++);if(0==o.input||0==o.output)throw new Error("Given nodes have no clear input/output node!");for(var e in t){for(var i in t[e].connections.out)o.connections.push(t[e].connections.out[i]);o.nodes.push(t[e])}return o},Perceptron:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("not enough layers (minimum 3) !!");var o=t.shift(),e=t.pop(),s=t,r=new n(o,e);r.connections=[];for(var a in r.nodes)r.nodes[a].connections={in:[],out:[]};for(var c in s)for(var h=0;h<s[c];h++){var a=new i;r.nodes.splice(o,0,a)}var u=0,f=o;s.push(e);for(var c in s){for(var h=u;h<u+f;h++)for(var d=u+f;d<u+f+s[c];d++)r.connect(r.nodes[h],r.nodes[d]);u+=f,f=s[c]}return r},Random:function(t,o,i,s){s=s||2;for(var r=new n(t,i),a=0;a<o;a++)r.mutate(e.Mutation.ADD_NODE);for(var a=0;a<o*s;a++)r.mutate(e.Mutation.ADD_CONN);return r},Hopfield:function(t){var o=new n(t,t),e=new s(o);return o.learn=function(t){var n=[];for(var o in t)n.push({input:t[o],output:t[o]});return e.train(n,{iterations:5e5,error:5e-5,rate:1})},o.feed=function(t){var n=this.activate(t),t=[];for(var o in n)t[o]=n[o]>=.5?1:0;return t},o}};t&&(t.exports=r)}).call(n,o(0)(t))},function(t,n,o){(function(t){function n(t,n,o,s){this.input=t,this.output=n,this.fitness=o,this.equal=s.equal||!1,this.popsize=s.popsize||50,this.elitism=s.elitism||0,this.mutation=s.mutation||Object.keys(i.Mutation).map(function(t){return i.Mutation[t]}),this.selection=s.selection||Object.keys(i.Selection).map(function(t){return i.Selection[t]}),this.crossover=s.crossover||Object.keys(i.Crossover).map(function(t){return i.Crossover[t]}),this.mutationRate=s.mutationRate||.3,this.mutationAmount=s.mutationAmount||1,this.generation=0,this.createPool(s.network||new e(this.input,this.output))}t&&(t.exports=n);var e=(o(2),o(3)),i=o(1),s=(i.Activation,i.Mutation,i.Selection);i.Crossover;n.prototype={createPool:function(t){this.population=[];for(var n=0;n<this.popsize;n++){var o=e.fromJSON(t.toJSON());this.population.push(o)}},evolve:function(){this.evaluate(),this.sort();for(var t=[],n=0;n<this.elitism;n++)t.push(this.population[n]);for(var n=0;n<this.popsize-this.elitism;n++)t.push(this.getOffspring());this.population=t,this.mutate(),this.generation++},getOffspring:function(){parent1=this.getParent(),parent2=this.getParent(),1==this.equal&&(parent1.score=0,parent2.score=0);var t=this.crossover[Math.floor(Math.random()*this.crossover.length)];return e.crossOver(parent1,parent2,t)},mutate:function(){for(genome in this.population)if(Math.random()<=this.mutationRate)for(var t=0;t<this.mutationAmount;t++){var n=this.mutation[Math.floor(Math.random()*this.mutation.length)];this.population[genome].mutate(n)}},evaluate:function(){for(genome in this.population){var t=this.fitness(this.population[genome]);this.population[genome].score=t}},sort:function(){this.population.sort(function(t,n){return n.score-t.score})},getFittest:function(){return void 0===this.population[this.population.length-1].score&&this.evaluate(),this.sort(),this.population[0]},getAverage:function(){void 0===this.population[this.population.length-1].score&&this.evaluate();var t=0;for(genome in this.population)t+=this.population[genome].score;return t/this.popsize},getParent:function(){switch(this.selection[Math.floor(Math.random()*this.selection.length)]){case s.FITNESS_PROPORTIONATE:var t=Math.floor(s.FITNESS_PROPORTIONATE.config(Math.random())*this.popsize);return this.population[t]}}}}).call(n,o(0)(t))},function(t,n,o){(function(t){var n={CROSS_ENTROPY:function(t,n){var o=0;for(var e in n)o-=t[e]*Math.log(n[e]+1e-15)+(1-t[e])*Math.log(1+1e-15-n[e]);return o},MSE:function(t,n){var o=0;for(var e in n)o+=Math.pow(t[e]-n[e],2);return o/n.length},BINARY:function(t,n){var o=0;for(var e in n)o+=Math.round(2*t[e])!=Math.round(2*n[e]);return o}};t&&(t.exports=n)}).call(n,o(0)(t))},function(t,n,o){(function(t){var n={SINGLE_POINT:{name:"SINGLE_POINT",config:[.4]},TWO_POINT:{name:"TWO_POINT",config:[.4,.9]},UNIFORM:{name:"UNIFORM"},AVERAGE:{name:"AVERAGE"}};t&&(t.exports=n)}).call(n,o(0)(t))},function(t,n,o){(function(t){var n=o(6),e={ADD_NODE:{name:"ADD_NODE"},SUB_NODE:{name:"SUB_NODE"},ADD_CONN:{name:"ADD_CONN"},SUB_CONN:{name:"REMOVE_CONN"},MOD_WEIGHT:{name:"MOD_WEIGHT",config:{min:-1,max:1}},MOD_BIAS:{name:"MOD_BIAS",config:{min:-1,max:1}},MOD_ACTIVATION:{name:"MOD_ACTIVATION",config:{allowed:[n.LOGISTIC,n.TANH,n.RELU,n.IDENTITY,n.HLIM,n.SOFTSIGN,n.SINUSOID,n.GAUSSIAN,n.SOFTPLUS,n.BENT_IDENTITY]}},config:{warnings:!1}};t&&(t.exports=e)}).call(n,o(0)(t))},function(t,n,o){(function(t){var n={FITNESS_PROPORTIONATE:{name:"FITNESS_PROPORTIONATE",config:function(t){return Math.pow(t,2)}}};t&&(t.exports=n)}).call(n,o(0)(t))},function(t,n,o){var e,i,s={Node:o(2),Neat:o(8),Network:o(3),Methods:o(1),Architect:o(7),Trainer:o(4)};e=[],void 0!==(i=function(){return s}.apply(n,e))&&(t.exports=i),void 0!==t&&t.exports&&(t.exports=s),"object"==typeof window&&(!function(){var t=window.neataptic;s.ninja=function(){return window.neataptic=t,s}}(),window.neataptic=s)}]);