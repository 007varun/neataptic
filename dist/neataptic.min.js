/*!
 * The MIT License (MIT)
 * 
 * Copyright 2017 Thomas Wagenaar
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE
 * 
 */
!function(t){function n(i){if(o[i])return o[i].exports;var e=o[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var o={};n.m=t,n.c=o,n.i=function(t){return t},n.d=function(t,o,i){n.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=13)}([function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,o){var i,e,s={Activation:o(6),Mutation:o(11),Selection:o(12),Crossover:o(10),Cost:o(9)};i=[],void 0!==(e=function(){return s}.apply(n,i))&&(t.exports=e),void 0!==t&&t.exports&&(t.exports=s),"object"==typeof window&&(!function(){var t=window.methods;s.ninja=function(){return window.methods=t,s}}(),window.methods=s)},function(t,n,o){(function(t){function n(t){this.bias="input"==t?0:.2*Math.random()-.1,this.squash=r.LOGISTIC,this.type=t||"hidden",this.activation=0,this.state=0,this.old=0,this.connections={in:[],out:[],gated:[],self:new e(this,this,0)},this.error={responsibility:0,projected:0},this.trace={}}t&&(t.exports=n);var i=o(1),e=o(3),s=o(4),r=i.Activation,a=i.Mutation;n.prototype={activate:function(t){if(void 0!==t)return this.activation=t,this.derivative=0,this.bias=0,this.activation;this.old=this.state,this.state=this.connections.self.gain*this.connections.self.weight*this.state+this.bias;for(var n in this.connections.in)n=this.connections.in[n],this.state+=n.from.activation*n.weight*n.gain;this.activation=this.squash(this.state),this.derivative=this.squash(this.state,!0);var o=[],i=[];for(var e in this.connections.gated){e=this.connections.gated[e];var s=e.to,r=o.indexOf(s);r>-1?i[r]+=e.weight*e.from.activation:(o.push(s),i.push(s.connections.self.gater==this?s.old:0),i[i.length-1]+=e.weight*e.from.activation)}for(var n in this.connections.in){n=this.connections.in[n],n.elegibility=this.connections.self.gain*this.connections.self.weight*n.elegibility+n.from.activation*n.gain;for(var a=0;a<o.length;a++){var s=o[a],c=i[a],r=n.xtrace.nodes.indexOf(s);r>-1?n.xtrace.values[r]=s.connections.self.gain*s.connections.self.weight*n.xtrace.values[r]+this.derivative*n.elegibility*c:(n.xtrace.nodes.push(s),n.xtrace.values.push(this.derivative*n.elegibility*c))}}for(var n in this.connections.gated)this.connections.gated[n].gain=this.activation;return this.activation},propagate:function(t,n){var o=0;if("output"==this.type)this.error.responsibility=this.error.projected=n-this.activation;else{for(var i in this.connections.out){var i=this.connections.out[i],e=i.to;o+=e.error.responsibility*i.weight*i.gain}this.error.projected=this.derivative*o,o=0;for(var s in this.connections.gated){s=this.connections.gated[s];var e=s.to,r=e.connections.self.gater==this?e.old:0;r+=s.weight*s.from.activation,o+=e.error.responsibility*r}this.error.gated=this.derivative*o,this.error.responsibility=this.error.projected+this.error.gated}t=t||.1;for(var i in this.connections.in){for(var i=this.connections.in[i],a=this.error.projected*i.elegibility,c=0;c<i.xtrace.nodes.length;c++){var e=i.xtrace.nodes[c],h=i.xtrace.values[c];a+=e.error.responsibility*h}i.weight+=t*a}this.bias+=t*this.error.responsibility},connect:function(t){var o=[];if(t instanceof s)for(var i=0;i<t.nodes.length;i++){var r=new e(this,t.nodes[i]);t.nodes[i].connections.in.push(r),this.connections.out.push(r),t.connections.in.push(r),o.push(r)}else if(t instanceof n)if(t==this)this.connections.self.weight=1,o.push(this.connections.self);else{var r=new e(this,t);t.connections.in.push(r),this.connections.out.push(r),o.push(r)}return o},disconnect:function(t,n){n=n||!1;for(var o in this.connections.out){var i=this.connections.out[o];if(i.to==t){this.connections.out.splice(o,1);var e=i.to.connections.in.indexOf(i);i.to.connections.in.splice(e,1);break}}n&&t.disconnect(this)},gate:function(t){Array.isArray(t)||(t=[t]);for(var n in t)n=t[n],this.connections.gated.push(n),n.gater=this},mutate:function(t){if(void 0===t)throw new Error("No mutate method given!");if(!t.name in i.Mutation)throw new Error("This method does not exist!");switch(t){case a.MOD_ACTIVATION:for(var n=Math.floor(Math.random()*a.MOD_ACTIVATION.config.allowed.length);a.MOD_ACTIVATION.config.allowed[n]==this.squash;)n=Math.floor(Math.random()*a.MOD_ACTIVATION.config.allowed.length);this.squash=a.MOD_ACTIVATION.config.allowed[n];break;case a.MOD_BIAS:var o=Math.random()*(a.MOD_BIAS.config.max-a.MOD_BIAS.config.min)+a.MOD_BIAS.config.min;this.bias+=o}},isProjectingTo:function(t){for(conn in this.connections.out)if(conn=this.connections.out[conn],conn.to==t)return!0;return!1},isProjectedBy:function(t){for(conn in this.connections.in)if(conn=this.connections.in[conn],conn.from==t)return!0;return!1},toJSON:function(){return{ID:this.ID,bias:this.bias,type:this.type,squash:this.squash.name,self:this.connections.self.weight}}},n.fromJSON=function(t){var o=new n;o.ID=t.ID,o.bias=t.bias,o.type=t.type,o.connections.self.weight=t.self;for(squash in r)if(r[squash].name==t.squash){o.squash=r[squash];break}return o}}).call(n,o(0)(t))},function(t,n,o){(function(t){function n(t,n,o){this.from=t,this.to=n,this.gain=1,this.weight=void 0===o?.2*Math.random()-.1:o,this.gater=null,this.elegibility=0,this.xtrace={nodes:[],values:[]}}t&&(t.exports=n),n.prototype={toJSON:function(){return{weight:this.weight}}},n.innovationID=function(t,n){return.5*(t+n)*(t+n+1)+n}}).call(n,o(0)(t))},function(t,n,o){(function(t){function n(t){this.nodes=[],this.connections={in:[],out:[]};for(var n=0;n<t;n++)this.nodes.push(new e)}t&&(t.exports=n);var i=o(1),e=(o(3),o(2));i.Activation,i.Mutation;n.prototype={activate:function(t){var n=[];if(void 0!==t&&t.length!=this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var o=0;o<this.nodes.length;o++){if(void 0===t)var i=this.nodes[o].activate();else var i=this.nodes[o].activate(t[o]);n.push(i)}return n},propagate:function(t,n){if(void 0!==n&&n.length!=this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var o=this.nodes.length-1;o>=0;o--)void 0===n?this.nodes[o].propagate(t):this.nodes[o].propagate(t,n[o])},connect:function(t){var o=[];if(t instanceof n)for(var i=0;i<this.nodes.length;i++)for(var s=0;s<t.nodes.length;s++){var o=this.nodes[i].connect(t.nodes[s]);this.connections.out.push(o[0]),t.connections.in.push(o[0]),o.push(o[0])}else if(t instanceof e)for(var i=0;i<this.nodes.length;i++){var o=this.nodes[i].connect(t);this.connections.out.push(o[0]),o.push(o[0])}return o},disconnect:function(t,o){if(o=o||!1,t instanceof n)for(var i=0;i<this.nodes.length;i++)for(var s=0;s<t.nodes.length;s++){this.nodes[i].disconnect(t.nodes[s],o);for(index in this.connections.out){var r=this.connections.out[index];if(r.from==this.nodes[i]&&r.to==t.nodes[s]){this.connections.out.splice(index,1);break}}if(o)for(index in this.connections.in){var r=this.connections.in[index];if(r.from==t.nodes[s]&&r.to==this.nodes[i]){this.connections.in.splice(index,1);break}}}else if(t instanceof e)for(var i=0;i<this.nodes.length;i++){this.nodes[i].disconnect(t,o);for(index in this.connections.out){var r=this.connections.out[index];if(r.from==this.nodes[i]&&r.to==t){this.connections.out.splice(index,1);break}}if(o)for(index in this.connections.in){var r=this.connections.in[index];if(r.from==t&&r.to==this.nodes[i]){this.connections.in.splice(index,1);break}}}}}}).call(n,o(0)(t))},function(t,n,o){(function(t){function n(t,n){if(void 0===t||void 0===n)throw new Error("No input or output size given");this.input=t,this.output=n,this.nodes=[],this.connections=[],this.gates=[];for(var o=0;o<this.input+this.output;o++){var e=o<this.input?"input":"output";this.nodes.push(new i(e,this.nodes.length))}for(var o=0;o<this.input;o++)for(var s=this.input;s<this.output+this.input;s++)this.connect(this.nodes[o],this.nodes[s])}t&&(t.exports=n);var i=o(2),e=o(3),s=o(1),r=s.Activation,a=s.Mutation;n.prototype={activate:function(t){var n=[];for(node in this.nodes)switch(this.nodes[node].type){case"input":this.nodes[node].activate(t[node]);break;case"hidden":this.nodes[node].activate();break;case"output":var o=this.nodes[node].activate();n.push(o)}return n},propagate:function(t,n){this.nodes.reverse();for(node in this.nodes)switch(this.nodes[node].type){case"hidden":this.nodes[node].propagate(t);break;case"output":this.nodes[node].propagate(t,n[node])}this.nodes.reverse()},connect:function(t,n){var o=t.connect(n);for(var i in o)i=o[i],this.connections.push(i);return o},disconnect:function(t,n){for(conn in this.connections)if(this.connections[conn].from==t&&this.connections[conn].to==n){this.connections.splice(conn,1);break}t.disconnect(n)},mutate:function(t){if(void 0===t)throw new Error("No mutate method given!");if(!t.name in s.Mutation)throw new Error("This method does not exist!");switch(t){case a.ADD_NODE:var n=this.connections[Math.floor(Math.random()*this.connections.length)];this.disconnect(n.from,n.to);var o=this.nodes.indexOf(n.to),e=new i("hidden",this.nodes.length);e.mutate(a.MOD_ACTIVATION);var r=Math.min(o,this.nodes.length-this.output);this.nodes.splice(r,0,e),this.connect(n.from,e),this.connect(e,n.to);break;case a.SUB_NODE:if(this.nodes.length==this.input+this.output){a.config.warnings&&console.warn("No more nodes left to remove!");break}for(var c=Math.floor(Math.random()*(this.nodes.length-this.output-this.input)+this.input),e=this.nodes[c],h=[],u=e.connections.in.length-1;u>=0;u--){var f=e.connections.in[u].from;h.push(f),this.disconnect(f,e)}for(var d=[],u=e.connections.out.length-1;u>=0;u--){var p=e.connections.out[u].to;d.push(p),this.disconnect(e,p)}for(var f in h){f=h[f];for(var p in d)p=d[p],f.isProjectingTo(p)||this.connect(f,p)}this.nodes.splice(c,1);break;case a.ADD_CONN:for(var l=[],v=0;v<this.nodes.length;v++){var g=this.nodes[v];if("output"!=g.type)for(var m=v+1;m<this.nodes.length;m++){var O=this.nodes[m];if("input"!=O.type){for(var w=!1,M=0;M<this.connections.length;M++)if(this.connections[M].from==g&&this.connections[M].to==O){w=!0;break}w||l.push([g,O])}}}if(0==l.length){console.warn("No more connections to be made!");break}var N=l[Math.floor(Math.random()*l.length)];this.connect(N[0],N[1]);break;case a.SUB_CONN:var I=[];for(u in this.connections)u=this.connections[u],u.from.connections.out.length>1&&u.to.connections.in.length>1&&I.push(u);if(0==I.length){a.config.warnings&&console.warn("No connections to remove!");break}var x=I[Math.floor(Math.random()*I.length)];this.disconnect(x.from,x.to);break;case a.MOD_WEIGHT:var n=this.connections[Math.floor(Math.random()*this.connections.length)],S=Math.random()*(a.MOD_WEIGHT.config.max-a.MOD_WEIGHT.config.min)+a.MOD_WEIGHT.config.min;n.weight+=S;break;case a.MOD_BIAS:var c=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),e=this.nodes[c];e.mutate(a.MOD_BIAS);break;case a.MOD_ACTIVATION:var c=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),e=this.nodes[c];e.mutate(a.MOD_ACTIVATION)}},train:function(t,n){n=n||{},void 0===n.rate&&console.warn("Using default learning rate, please define a rate!"),void 0===n.iterations&&console.warn("No target iterations given, running until error is reached!");var o=Date.now(),i=n.log||!1,e=n.error||.005,r=n.cost||s.Cost.MSE,a=n.rate||.3,c=n.shuffle||!1,h=n.iterations||0,u=n.crossValidate||!1;if(u)var f=n.crossValidate.testSize,d=n.crossValidate.testError,p=Math.ceil((1-f)*t.length),l=t.slice(0,p),v=t.slice(p);var g=a,m=0;Array.isArray(a)&&(m=Math.floor(h/a.length));for(var O=0,w=1;w>e&&(0==h||O<h)&&!(u&&w<=d);){if(O++,"function"==typeof a&&(g=a(h,w)),w=0,m>0){g=a[Math.floor(h/m)]||g}if(u?(this._trainSet(l,g,r),w+=this.test(v,r).error):(w+=this._trainSet(t,g,r),w/=t.length),c)for(var M,N,I=t.length;I;M=Math.floor(Math.random()*I),N=t[--I],t[I]=t[M],t[M]=N);i&&O%i==0&&console.log("iterations",O,"error",w,"rate",g)}return{error:w,iterations:O,time:Date.now()-o}},_trainSet:function(t,n,o){var i=0;for(var e in t){var s=t[e].input,r=t[e].output,a=this.activate(s);this.propagate(n,r),i+=o(r,a)}return i},test:function(t,n){var o,i,e,s=0,r=Date.now();for(var a in t)o=t[a].input,e=t[a].output,i=this.activate(o),s+=n(e,i);return s/=t.length,{error:s,time:Date.now()-r}},graph:function(t,n,o){var o=o||100,i=1,e=1,s={nodes:[],links:[],constraints:[{type:"alignment",axis:"x",offsets:[]},{type:"alignment",axis:"y",offsets:[]}],main:{maxActivation:0,maxWeight:0}};for(index in this.nodes){var a=this.nodes[index],c="input"==a.type?0:"output"==a.type?1:a.squash==r.LOGISTIC?2:a.squash==r.TANH?3:a.squash==r.IDENTITY?4:a.squash==r.HLIM?5:a.squash==r.RELU?6:a.squash==r.SOFTSIGN?7:a.squash==r.SINUSOID?8:a.squash==r.GAUSSIAN?9:a.squash==r.SOFTPLUS?10:a.squash==r.BENT_IDENTITY?11:null;0==c?(s.constraints[0].offsets.push({node:index,offset:(t-o)/this.input*i}),s.constraints[1].offsets.push({node:index,offset:0}),i++):1==c&&(s.constraints[0].offsets.push({node:index,offset:(t-o)/(this.output+1)*e}),s.constraints[1].offsets.push({node:index,offset:-(n-o)/2}),e++),a.activation>s.main.maxActivation&&(s.main.maxActivation=a.activation),s.nodes.push({id:index,type:c,activation:a.activation})}for(connection in this.connections)connection=this.connections[connection],s.links.push({source:this.nodes.indexOf(connection.from),target:this.nodes.indexOf(connection.to),weight:connection.weight}),connection.weight>s.main.maxWeight&&(s.main.maxWeight=connection.weight);return s},toJSON:function(){var t={nodes:[],connections:[],input:this.input,output:this.output};for(index in this.nodes){var n=this.nodes[index].toJSON();n.index=index,t.nodes.push(n)}for(o in this.connections){var o=this.connections[o],i=o.toJSON();i.from=this.nodes.indexOf(o.from),i.to=this.nodes.indexOf(o.to),t.connections.push(i)}return t}},n.fromJSON=function(t){var o=new n(t.input,t.output);o.nodes=[],o.connections=[];for(node in t.nodes)o.nodes.push(i.fromJSON(t.nodes[node]));for(e in t.connections){var e=t.connections[e],s=o.connect(o.nodes[e.from],o.nodes[e.to])[0];s.weight=e.weight,s.ID=e.id}return o},n.merge=function(t,o){if(t=n.fromJSON(t.toJSON()),o=n.fromJSON(o.toJSON()),t.output!=o.input)throw new Error("Output size of network1 should be the same as the input size of network2!");for(conn in o.connections)if(conn=o.connections[conn],"input"==conn.from.type){var i=o.nodes.indexOf(conn.from);o.nodes[i];conn.from=t.nodes[t.nodes.length-1-i]}for(var e=t.nodes.length-1-t.output;e<t.nodes.length;e++)t.nodes[e].type="hidden";return t.connections=t.connections.concat(o.connections),t.nodes=t.nodes.concat(o.nodes),t},n.crossOver=function(t,o,i){if(t.input!=o.input||t.output!=o.output)throw new Error("Networks don't have the same input/output size!");var s=new n(t.input,t.output);s.connections=[],s.nodes=[];var r=t.score||0,a=o.score||0;if(t=n.fromJSON(t.toJSON()),o=n.fromJSON(o.toJSON()),r==a)var c=Math.max(t.nodes.length,o.nodes.length),h=Math.min(t.nodes.length,o.nodes.length),u=Math.floor(Math.random()*(c-h+1)+h);else if(r>a)var u=t.nodes.length;else var u=o.nodes.length;for(var f=0;f<u;f++)if(f<t.nodes.length&&f<o.nodes.length){var d=null;if(f>=u-t.output)for(;null==d||"output"!=d.type;)d=Math.random()>=.5?t.nodes[f]:o.nodes[f];else for(;null==d||f<u-t.output&&"output"==d.type;)d=Math.random()>=.5?t.nodes[f]:o.nodes[f];s.nodes.push(d)}else f<t.nodes.length?f>=u-t.output?s.nodes.push(t.nodes[t.nodes.length-(f-(u-t.output-1))]):s.nodes.push(t.nodes[f]):f<o.nodes.length&&(f>=u-t.output?s.nodes.push(o.nodes[o.nodes.length-(f-(u-t.output-1))]):s.nodes.push(o.nodes[f]));for(d in s.nodes){var d=s.nodes[d];d.connections={in:[],out:[],self:new e(d,d,0)}}var p={},l={};for(v in t.connections){var v=t.connections[v],g={weight:v.weight,from:t.nodes.indexOf(v.from),to:t.nodes.indexOf(v.to)};if(g.to==t.nodes.length-1){if(!(g.from<u-1))continue;g.to=u-1}var m=e.innovationID(g.from,g.to);p[m]=g}for(v in o.connections){var v=o.connections[v],g={weight:v.weight,from:o.nodes.indexOf(v.from),to:o.nodes.indexOf(v.to)};if(g.to==o.nodes.length-1){if(!(g.from<u-1))continue;g.to=u-1}var m=e.innovationID(g.from,g.to);l[m]=g}var O={};for(var m in p)m in l&&(O[m]=[p[m],l[m]],delete p[m],delete l[m]);var w=[];for(v in O){var v=Math.random()>=.5?O[v][0]:O[v][1];w.push(v)}if(r==a){for(v in p)w.push(p[v]);for(v in l)w.push(l[v])}else if(r>a)for(v in p)w.push(p[v]);else for(v in l)w.push(l[v]);for(v in w){var M=w[v];if(M.to<u){var N=s.nodes[M.from];if("output"!=N.type){var I=s.nodes[M.to],v=s.connect(N,I)[0];v.weight=M.weight}}}return s}}).call(n,o(0)(t))},function(t,n,o){(function(t){var n={LOGISTIC:function(t,o){if(!o)return 1/(1+Math.exp(-t));var i=n.LOGISTIC(t);return i*(1-i)},TANH:function(t,o){return o?1-Math.pow(n.TANH(t),2):Math.tanh(t)},IDENTITY:function(t,n){return n?1:t},HLIM:function(t,n){return n?1:t>0?1:0},RELU:function(t,n){return n?t>0?1:0:t>0?t:0},SOFTSIGN:function(t,n){var o=1+Math.abs(t);return n?t/Math.pow(o,2):t/o},SINUSOID:function(t,n){return n?Math.cos(t):Math.sin(t)},GAUSSIAN:function(t,n){var o=Math.exp(-Math.pow(t,2));return n?-2*t*o:o},SOFTPLUS:function(t,o){return o?n.LOGISTIC(t):Math.log(1+Math.exp(t))},BENT_IDENTITY:function(t,n){var o=Math.sqrt(Math.pow(t,2)+1);return n?t/(2*o)+1:(o-1)/2+t}};t&&(t.exports=n)}).call(n,o(0)(t))},function(t,n,o){(function(t){var n=o(5),i=o(1),e=o(2),s=o(4),r={Construct:function(t){var o=new n(0,0),i=[];for(item in t)if(t[item]instanceof s)for(var r in t[item].nodes)i.push(t[item].nodes[r]);else t[item]instanceof e&&i.push(t[item]);for(var r in i)i[r].connections.out.length+i[r].connections.gated.length==0?(i[r].type="output",o.output++):i[r].connections.in.length||(i[r].type="input",o.input++);if(0==o.input||0==o.output)throw new Error("Given nodes have no clear input/output node!");for(var r in i)for(var a in i[r].connections.out)o.connections.push(i[r].connections.out[a]);return o.nodes=i,o},Perceptron:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("not enough layers (minimum 3) !!");var n=[];n.push(new s(t[0]));for(var o=1;o<t.length;o++){var i=t[o],i=new s(i);n.push(i),n[o-1].connect(n[o])}return r.Construct(n)},Random:function(t,o,e,s){s=s||2;for(var r=new n(t,e),a=0;a<o;a++)r.mutate(i.Mutation.ADD_NODE);for(var a=0;a<o*s;a++)r.mutate(i.Mutation.ADD_CONN);return r},LSTM:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("not enough layers (minimum 3) !!");var n=new s(t.shift()),o=new s(t.pop()),i=t,a=[];a.push(n);for(var c in i){c=i[c];var h=new e,u=new e,f=new e,d=new e;h.bias=1,u.bias=1,d.bias=1;var p=n.connect(f);n.connect(h),n.connect(d),n.connect(u),f.connect(h),f.connect(u),f.connect(d);var l=f.connect(f),v=f.connect(o);h.gate(p),u.gate(l),d.gate(v),a.push(h),a.push(u),a.push(f),a.push(d)}return n.connect(o),a.push(o),r.Construct(a)},Hopfield:function(t){var o=new n(t,t);return o.learn=function(t){var n=[];for(var i in t)n.push({input:t[i],output:t[i]});return o.train(n,{iterations:5e5,error:5e-5,rate:1})},o.feed=function(t){var n=this.activate(t),t=[];for(var o in n)t[o]=n[o]>=.5?1:0;return t},o}};t&&(t.exports=r)}).call(n,o(0)(t))},function(t,n,o){(function(t){function n(t,n,o,s){this.input=t,this.output=n,this.fitness=o,s=s||{},this.equal=s.equal||!1,this.popsize=s.popsize||50,this.elitism=s.elitism||0,this.mutation=s.mutation||Object.keys(e.Mutation).map(function(t){return e.Mutation[t]}),this.selection=s.selection||Object.keys(e.Selection).map(function(t){return e.Selection[t]}),this.crossover=s.crossover||Object.keys(e.Crossover).map(function(t){return e.Crossover[t]}),this.mutationRate=s.mutationRate||.3,this.mutationAmount=s.mutationAmount||1,this.generation=0,this.createPool(s.network||new i(this.input,this.output))}t&&(t.exports=n);var i=(o(2),o(5)),e=o(1),s=(e.Activation,e.Mutation,e.Selection);e.Crossover;n.prototype={createPool:function(t){this.population=[];for(var n=0;n<this.popsize;n++){var o=i.fromJSON(t.toJSON());this.population.push(o)}},evolve:function(){this.evaluate(),this.sort();for(var t=[],n=0;n<this.elitism;n++)t.push(this.population[n]);for(var n=0;n<this.popsize-this.elitism;n++)t.push(this.getOffspring());this.population=t,this.mutate(),this.generation++},getOffspring:function(){parent1=this.getParent(),parent2=this.getParent(),1==this.equal&&(parent1.score=0,parent2.score=0);var t=this.crossover[Math.floor(Math.random()*this.crossover.length)];return i.crossOver(parent1,parent2,t)},mutate:function(){for(genome in this.population)if(Math.random()<=this.mutationRate)for(var t=0;t<this.mutationAmount;t++){var n=this.mutation[Math.floor(Math.random()*this.mutation.length)];this.population[genome].mutate(n)}},evaluate:function(){for(genome in this.population){var t=this.fitness(this.population[genome]);this.population[genome].score=t}},sort:function(){this.population.sort(function(t,n){return n.score-t.score})},getFittest:function(){return void 0===this.population[this.population.length-1].score&&this.evaluate(),this.sort(),this.population[0]},getAverage:function(){void 0===this.population[this.population.length-1].score&&this.evaluate();var t=0;for(genome in this.population)t+=this.population[genome].score;return t/this.popsize},getParent:function(){switch(this.selection[Math.floor(Math.random()*this.selection.length)]){case s.FITNESS_PROPORTIONATE:var t=Math.floor(s.FITNESS_PROPORTIONATE.config(Math.random())*this.popsize);return this.population[t]}}}}).call(n,o(0)(t))},function(t,n,o){(function(t){var n={CROSS_ENTROPY:function(t,n){var o=0;for(var i in n)o-=t[i]*Math.log(n[i]+1e-15)+(1-t[i])*Math.log(1+1e-15-n[i]);return o},MSE:function(t,n){var o=0;for(var i in n)o+=Math.pow(t[i]-n[i],2);return o/n.length},BINARY:function(t,n){var o=0;for(var i in n)o+=Math.round(2*t[i])!=Math.round(2*n[i]);return o}};t&&(t.exports=n)}).call(n,o(0)(t))},function(t,n,o){(function(t){var n={SINGLE_POINT:{name:"SINGLE_POINT",config:[.4]},TWO_POINT:{name:"TWO_POINT",config:[.4,.9]},UNIFORM:{name:"UNIFORM"},AVERAGE:{name:"AVERAGE"}};t&&(t.exports=n)}).call(n,o(0)(t))},function(t,n,o){(function(t){var n=o(6),i={ADD_NODE:{name:"ADD_NODE"},SUB_NODE:{name:"SUB_NODE"},ADD_CONN:{name:"ADD_CONN"},SUB_CONN:{name:"REMOVE_CONN"},MOD_WEIGHT:{name:"MOD_WEIGHT",config:{min:-1,max:1}},MOD_BIAS:{name:"MOD_BIAS",config:{min:-1,max:1}},MOD_ACTIVATION:{name:"MOD_ACTIVATION",config:{allowed:[n.LOGISTIC,n.TANH,n.RELU,n.IDENTITY,n.HLIM,n.SOFTSIGN,n.SINUSOID,n.GAUSSIAN,n.SOFTPLUS,n.BENT_IDENTITY]}},config:{warnings:!1}};t&&(t.exports=i)}).call(n,o(0)(t))},function(t,n,o){(function(t){var n={FITNESS_PROPORTIONATE:{name:"FITNESS_PROPORTIONATE",config:function(t){return Math.pow(t,2)}}};t&&(t.exports=n)}).call(n,o(0)(t))},function(t,n,o){var i,e,s={Node:o(2),Neat:o(8),Network:o(5),Methods:o(1),Architect:o(7),Group:o(4),Connection:o(3)};i=[],void 0!==(e=function(){return s}.apply(n,i))&&(t.exports=e),void 0!==t&&t.exports&&(t.exports=s),"object"==typeof window&&(!function(){var t=window.neataptic;s.ninja=function(){return window.neataptic=t,s}}(),window.neataptic=s)}]);