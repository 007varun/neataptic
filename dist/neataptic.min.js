/*!
 * The MIT License (MIT)
 * 
 * Copyright 2017 Thomas Wagenaar
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE
 * 
 */
!function(n){function t(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};t.m=n,t.c=o,t.i=function(n){return n},t.d=function(n,o,e){t.o(n,o)||Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:e})},t.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(o,"a",o),o},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=16)}([function(n,t){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,t,o){var e,i,s={Activation:o(7),Mutation:o(14),Selection:o(15),Crossover:o(12),Cost:o(11),Gating:o(13),Connection:o(10)};e=[],void 0!==(i=function(){return s}.apply(t,e))&&(n.exports=i),void 0!==n&&n.exports&&(n.exports=s),"object"==typeof window&&(!function(){var n=window.methods;s.ninja=function(){return window.methods=n,s}}(),window.methods=s)},function(n,t,o){(function(n){function t(n){this.bias="input"==n?0:.2*Math.random()-.1,this.squash=r.LOGISTIC,this.type=n||"hidden",this.activation=0,this.state=0,this.old=0,this.connections={in:[],out:[],gated:[],self:new i(this,this,0)},this.error={responsibility:0,projected:0}}n&&(n.exports=t);var e=o(1),i=o(3),s=o(5),r=e.Activation,a=e.Mutation;t.prototype={activate:function(n){if(void 0!==n)return this.activation=n,this.derivative=0,this.bias=0,this.activation;this.old=this.state,this.state=this.connections.self.gain*this.connections.self.weight*this.state+this.bias;for(var t in this.connections.in)t=this.connections.in[t],this.state+=t.from.activation*t.weight*t.gain;this.activation=this.squash(this.state),this.derivative=this.squash(this.state,!0);var o=[],e=[];for(var i in this.connections.gated){i=this.connections.gated[i];var s=i.to,r=o.indexOf(s);r>-1?e[r]+=i.weight*i.from.activation:(o.push(s),e.push(s.connections.self.gater==this?s.old:0),e[e.length-1]+=i.weight*i.from.activation)}for(var t in this.connections.in){t=this.connections.in[t],t.elegibility=this.connections.self.gain*this.connections.self.weight*t.elegibility+t.from.activation*t.gain;for(var a=0;a<o.length;a++){var s=o[a],c=e[a],r=t.xtrace.nodes.indexOf(s);r>-1?t.xtrace.values[r]=s.connections.self.gain*s.connections.self.weight*t.xtrace.values[r]+this.derivative*t.elegibility*c:(t.xtrace.nodes.push(s),t.xtrace.values.push(this.derivative*t.elegibility*c))}}for(var t in this.connections.gated)this.connections.gated[t].gain=this.activation;return this.activation},propagate:function(n,t){var o=0;if("output"==this.type)this.error.responsibility=this.error.projected=t-this.activation;else{for(var e in this.connections.out){var e=this.connections.out[e],i=e.to;o+=i.error.responsibility*e.weight*e.gain}this.error.projected=this.derivative*o,o=0;for(var s in this.connections.gated){s=this.connections.gated[s];var i=s.to,r=i.connections.self.gater==this?i.old:0;r+=s.weight*s.from.activation,o+=i.error.responsibility*r}this.error.gated=this.derivative*o,this.error.responsibility=this.error.projected+this.error.gated}n=n||.1;for(var e in this.connections.in){for(var e=this.connections.in[e],a=this.error.projected*e.elegibility,c=0;c<e.xtrace.nodes.length;c++){var i=e.xtrace.nodes[c],h=e.xtrace.values[c];a+=i.error.responsibility*h}e.weight+=n*a}this.bias+=n*this.error.responsibility},connect:function(n){var o=[];if(n instanceof s)for(var e=0;e<n.nodes.length;e++){var r=new i(this,n.nodes[e]);n.nodes[e].connections.in.push(r),this.connections.out.push(r),n.connections.in.push(r),o.push(r)}else if(n instanceof t)if(n==this)this.connections.self.weight=1,o.push(this.connections.self);else{var r=new i(this,n);n.connections.in.push(r),this.connections.out.push(r),o.push(r)}return o},disconnect:function(n,t){t=t||!1;for(var o in this.connections.out){var e=this.connections.out[o];if(e.to==n){this.connections.out.splice(o,1);var i=e.to.connections.in.indexOf(e);e.to.connections.in.splice(i,1);break}}t&&n.disconnect(this)},gate:function(n){Array.isArray(n)||(n=[n]);for(var t in n)t=n[t],this.connections.gated.push(t),t.gater=this},mutate:function(n){if(void 0===n)throw new Error("No mutate method given!");if(!n.name in e.Mutation)throw new Error("This method does not exist!");switch(n){case a.MOD_ACTIVATION:for(var t=Math.floor(Math.random()*a.MOD_ACTIVATION.config.allowed.length);a.MOD_ACTIVATION.config.allowed[t]==this.squash;)t=Math.floor(Math.random()*a.MOD_ACTIVATION.config.allowed.length);this.squash=a.MOD_ACTIVATION.config.allowed[t];break;case a.MOD_BIAS:var o=Math.random()*(a.MOD_BIAS.config.max-a.MOD_BIAS.config.min)+a.MOD_BIAS.config.min;this.bias+=o}},isProjectingTo:function(n){for(conn in this.connections.out)if(conn=this.connections.out[conn],conn.to==n)return!0;return!1},isProjectedBy:function(n){for(conn in this.connections.in)if(conn=this.connections.in[conn],conn.from==n)return!0;return!1},toJSON:function(){return{bias:this.bias,type:this.type,squash:this.squash.name}}},t.fromJSON=function(n){var o=new t;o.bias=n.bias,o.type=n.type;for(squash in r)if(r[squash].name==n.squash){o.squash=r[squash];break}return o}}).call(t,o(0)(n))},function(n,t,o){(function(n){function t(n,t,o){this.from=n,this.to=t,this.gain=1,this.weight=void 0===o?.2*Math.random()-.1:o,this.gater=null,this.elegibility=0,this.xtrace={nodes:[],values:[]}}n&&(n.exports=t),t.prototype={toJSON:function(){return{weight:this.weight}}},t.innovationID=function(n,t){return.5*(n+t)*(n+t+1)+t}}).call(t,o(0)(n))},function(n,t,o){(function(n){var t={warnings:!0};n&&(n.exports=t)}).call(t,o(0)(n))},function(n,t,o){(function(n){function t(n){this.nodes=[],this.connections={in:[],out:[],self:[]};for(var t=0;t<n;t++)this.nodes.push(new i)}n&&(n.exports=t);var e=o(1),i=(o(3),o(2)),s=o(4);e.Activation,e.Mutation;t.prototype={activate:function(n){var t=[];if(void 0!==n&&n.length!=this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var o=0;o<this.nodes.length;o++){if(void 0===n)var e=this.nodes[o].activate();else var e=this.nodes[o].activate(n[o]);t.push(e)}return t},propagate:function(n,t){if(void 0!==t&&t.length!=this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var o=this.nodes.length-1;o>=0;o--)void 0===t?this.nodes[o].propagate(n):this.nodes[o].propagate(n,t[o])},connect:function(n,o){var r=[];if(n instanceof t){if(void 0===o&&(this!=n?(s.warnings&&console.warn("No group connection specified, using ALL_TO_ALL"),o=e.Connection.ALL_TO_ALL):(s.warnings&&console.warn("No group connection specified, using ONE_TO_ONE"),o=e.Connection.ONE_TO_ONE)),o==e.Connection.ALL_TO_ALL||o==e.Connection.ALL_TO_ELSE){for(var a=0;a<this.nodes.length;a++)for(var c=0;c<n.nodes.length;c++)if(o!=e.Connection.ALL_TO_ELSE||this.nodes[a]!=n.nodes[c]){var h=this.nodes[a].connect(n.nodes[c]);this.connections.out.push(h[0]),n.connections.in.push(h[0]),r.push(h[0])}}else if(o==e.Connection.ONE_TO_ONE){if(this.nodes.length!=n.nodes.length)throw new Error("From and To group must be the same size!");for(var a=0;a<this.nodes.length;a++){var h=this.nodes[a].connect(n.nodes[a]);this.connections.self.push(h[0]),r.push(h[0])}}}else if(n instanceof i)for(var a=0;a<this.nodes.length;a++){var h=this.nodes[a].connect(n);this.connections.out.push(h[0]),r.push(h[0])}return r},gate:function(n,t){if(void 0===t)throw new Error("Please specify Gating.INPUT, Gating.OUTPUT");Array.isArray(n)||(n=[n]);var o=[],i=[];for(var s in n)s=n[s],o.includes(s.from)||o.push(s.from),i.includes(s.to)||i.push(s.to);switch(t){case e.Gating.INPUT:for(var r=0;r<i.length;r++){var a=i[r],c=this.nodes[r%this.nodes.length];for(var h in a.connections.in)h=a.connections.in[h],n.includes(h)&&c.gate(h)}break;case e.Gating.OUTPUT:for(var r=0;r<o.length;r++){var a=o[r],c=this.nodes[r%this.nodes.length];for(var h in a.connections.out)h=a.connections.out[h],n.includes(h)&&c.gate(h)}break;case e.Gating.SELF:for(var r=0;r<o.length;r++){var a=o[r],c=this.nodes[r%this.nodes.length];n.includes(a.connections.self)&&c.gate(a.connections.self)}}},set:function(n){for(var t in this.nodes)this.nodes[t].bias=n.bias||this.nodes[t].bias,this.nodes[t].squash=n.squash||this.nodes[t].squash},disconnect:function(n,o){if(o=o||!1,n instanceof t)for(var e=0;e<this.nodes.length;e++)for(var s=0;s<n.nodes.length;s++){this.nodes[e].disconnect(n.nodes[s],o);for(index in this.connections.out){var r=this.connections.out[index];if(r.from==this.nodes[e]&&r.to==n.nodes[s]){this.connections.out.splice(index,1);break}}if(o)for(index in this.connections.in){var r=this.connections.in[index];if(r.from==n.nodes[s]&&r.to==this.nodes[e]){this.connections.in.splice(index,1);break}}}else if(n instanceof i)for(var e=0;e<this.nodes.length;e++){this.nodes[e].disconnect(n,o);for(index in this.connections.out){var r=this.connections.out[index];if(r.from==this.nodes[e]&&r.to==n){this.connections.out.splice(index,1);break}}if(o)for(index in this.connections.in){var r=this.connections.in[index];if(r.from==n&&r.to==this.nodes[e]){this.connections.in.splice(index,1);break}}}}}}).call(t,o(0)(n))},function(n,t,o){(function(n){function t(n,t){if(void 0===n||void 0===t)throw new Error("No input or output size given");this.input=n,this.output=t,this.nodes=[],this.connections=[],this.gates=[],this.selfconns=[];for(var o=0;o<this.input+this.output;o++){var i=o<this.input?"input":"output";this.nodes.push(new e(i,this.nodes.length))}for(var o=0;o<this.input;o++)for(var s=this.input;s<this.output+this.input;s++)this.connect(this.nodes[o],this.nodes[s])}n&&(n.exports=t);var e=o(2),i=o(3),s=o(1),r=o(4),a=s.Activation,c=s.Mutation;t.prototype={activate:function(n){var t=[];for(node in this.nodes)switch(this.nodes[node].type){case"input":this.nodes[node].activate(n[node]);break;case"hidden":this.nodes[node].activate();break;case"output":var o=this.nodes[node].activate();t.push(o)}return t},propagate:function(n,t){this.nodes.reverse();for(node in this.nodes)switch(this.nodes[node].type){case"hidden":this.nodes[node].propagate(n);break;case"output":this.nodes[node].propagate(n,t[node])}this.nodes.reverse()},connect:function(n,t){var o=n.connect(t);for(var e in o)e=o[e],n!=t?this.connections.push(e):this.selfconns.push(e);return o},disconnect:function(n,t){for(conn in this.connections)if(this.connections[conn].from==n&&this.connections[conn].to==t){this.connections.splice(conn,1);break}n.disconnect(t)},gate:function(n,t){n.gate(t),this.gates.push(t)},mutate:function(n){if(void 0===n)throw new Error("No mutate method given!");if(!n.name in s.Mutation)throw new Error("This method does not exist!");switch(n){case c.ADD_NODE:var t=this.connections[Math.floor(Math.random()*this.connections.length)];this.disconnect(t.from,t.to);var o=this.nodes.indexOf(t.to),i=new e("hidden",this.nodes.length);i.mutate(c.MOD_ACTIVATION);var a=Math.min(o,this.nodes.length-this.output);this.nodes.splice(a,0,i),this.connect(t.from,i),this.connect(i,t.to);break;case c.SUB_NODE:if(this.nodes.length==this.input+this.output){r.warnings&&console.warn("No more nodes left to remove!");break}for(var h=Math.floor(Math.random()*(this.nodes.length-this.output-this.input)+this.input),i=this.nodes[h],u=[],f=i.connections.in.length-1;f>=0;f--){var d=i.connections.in[f].from;u.push(d),this.disconnect(d,i)}for(var p=[],f=i.connections.out.length-1;f>=0;f--){var l=i.connections.out[f].to;p.push(l),this.disconnect(i,l)}for(var d in u){d=u[d];for(var l in p)l=p[l],d.isProjectingTo(l)||this.connect(d,l)}this.nodes.splice(h,1);break;case c.ADD_CONN:for(var v=[],g=0;g<this.nodes.length;g++){var m=this.nodes[g];if("output"!=m.type)for(var O=g+1;O<this.nodes.length;O++){var w=this.nodes[O];if("input"!=w.type){for(var T=!1,N=0;N<this.connections.length;N++)if(this.connections[N].from==m&&this.connections[N].to==w){T=!0;break}T||v.push([m,w])}}}if(0==v.length){r.warnings&&console.warn("No more connections to be made!");break}var M=v[Math.floor(Math.random()*v.length)];this.connect(M[0],M[1]);break;case c.SUB_CONN:var I=[];for(f in this.connections)f=this.connections[f],f.from.connections.out.length>1&&f.to.connections.in.length>1&&I.push(f);if(0==I.length){r.warnings&&console.warn("No connections to remove!");break}var x=I[Math.floor(Math.random()*I.length)];this.disconnect(x.from,x.to);break;case c.MOD_WEIGHT:var t=this.connections[Math.floor(Math.random()*this.connections.length)],S=Math.random()*(c.MOD_WEIGHT.config.max-c.MOD_WEIGHT.config.min)+c.MOD_WEIGHT.config.min;t.weight+=S;break;case c.MOD_BIAS:var h=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),i=this.nodes[h];i.mutate(c.MOD_BIAS);break;case c.MOD_ACTIVATION:var h=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),i=this.nodes[h];i.mutate(c.MOD_ACTIVATION)}},train:function(n,t){t=t||{},void 0===t.rate&&r.warnings&&console.warn("Using default learning rate, please define a rate!"),void 0===t.iterations&&r.warnings&&console.warn("No target iterations given, running until error is reached!");var o=Date.now(),e=t.log||!1,i=t.error||.005,a=t.cost||s.Cost.MSE,c=t.rate||.3,h=t.shuffle||!1,u=t.iterations||0,f=t.crossValidate||!1;if(f)var d=t.crossValidate.testSize,p=t.crossValidate.testError,l=Math.ceil((1-d)*n.length),v=n.slice(0,l),g=n.slice(l);var m=c,O=0;Array.isArray(c)&&(O=Math.floor(u/c.length));for(var w=0,T=1;T>i&&(0==u||w<u)&&!(f&&T<=p);){if(w++,"function"==typeof c&&(m=c(u,T)),T=0,O>0){m=c[Math.floor(u/O)]||m}if(f?(this._trainSet(v,m,a),T+=this.test(g,a).error):(T+=this._trainSet(n,m,a),T/=n.length),h)for(var N,M,I=n.length;I;N=Math.floor(Math.random()*I),M=n[--I],n[I]=n[N],n[N]=M);e&&w%e==0&&console.log("iterations",w,"error",T,"rate",m)}return{error:T,iterations:w,time:Date.now()-o}},_trainSet:function(n,t,o){var e=0;for(var i in n){var s=n[i].input,r=n[i].output,a=this.activate(s);this.propagate(t,r),e+=o(r,a)}return e},test:function(n,t){var o,e,i,s=0,r=Date.now();for(var a in n)o=n[a].input,i=n[a].output,e=this.activate(o),s+=t(i,e);return s/=n.length,{error:s,time:Date.now()-r}},graph:function(n,t,o){var o=o||100,e=1,i=1,s={nodes:[],links:[],constraints:[{type:"alignment",axis:"x",offsets:[]},{type:"alignment",axis:"y",offsets:[]}],main:{maxActivation:0,maxWeight:0}};for(index in this.nodes){var r=this.nodes[index],c="input"==r.type?0:"output"==r.type?1:r.squash==a.LOGISTIC?2:r.squash==a.TANH?3:r.squash==a.IDENTITY?4:r.squash==a.HLIM?5:r.squash==a.RELU?6:r.squash==a.SOFTSIGN?7:r.squash==a.SINUSOID?8:r.squash==a.GAUSSIAN?9:r.squash==a.SOFTPLUS?10:r.squash==a.BENT_IDENTITY?11:null;0==c?(s.constraints[0].offsets.push({node:index,offset:(n-o)/this.input*e}),s.constraints[1].offsets.push({node:index,offset:0}),e++):1==c&&(s.constraints[0].offsets.push({node:index,offset:(n-o)/(this.output+1)*i}),s.constraints[1].offsets.push({node:index,offset:-(t-o)/2}),i++),r.activation>s.main.maxActivation&&(s.main.maxActivation=r.activation),s.nodes.push({id:index,type:c,activation:r.activation})}for(connection in this.connections)connection=this.connections[connection],s.links.push({source:this.nodes.indexOf(connection.from),target:this.nodes.indexOf(connection.to),weight:connection.weight}),connection.weight>s.main.maxWeight&&(s.main.maxWeight=connection.weight);return s},toJSON:function(){var n={nodes:[],connections:[],input:this.input,output:this.output};for(index in this.nodes){var t=this.nodes[index].toJSON();t.index=index,n.nodes.push(t);var t=this.nodes[index];if(0!=t.connections.self.weight){var o=t.connections.self.toJSON();o.from=index,o.to=index,o.gater=null!=t.connections.self.gater?this.nodes.indexOf(t.connections.self.gater):null,n.connections.push(o)}}for(e in this.connections){var e=this.connections[e],o=e.toJSON();o.from=this.nodes.indexOf(e.from),o.to=this.nodes.indexOf(e.to),o.gater=null!=e.gater?this.nodes.indexOf(e.gater):null,n.connections.push(o)}return n}},t.fromJSON=function(n){var o=new t(n.input,n.output);o.nodes=[],o.connections=[];for(node in n.nodes)o.nodes.push(e.fromJSON(n.nodes[node]));for(i in n.connections){var i=n.connections[i],s=o.connect(o.nodes[i.from],o.nodes[i.to])[0];s.weight=i.weight,null!=i.gater&&o.gate(o.nodes[i.gater],s)}return o},t.merge=function(n,o){if(n=t.fromJSON(n.toJSON()),o=t.fromJSON(o.toJSON()),n.output!=o.input)throw new Error("Output size of network1 should be the same as the input size of network2!");for(conn in o.connections)if(conn=o.connections[conn],"input"==conn.from.type){var e=o.nodes.indexOf(conn.from);o.nodes[e];conn.from=n.nodes[n.nodes.length-1-e]}for(var i=n.nodes.length-1-n.output;i<n.nodes.length;i++)n.nodes[i].type="hidden";return n.connections=n.connections.concat(o.connections),n.nodes=n.nodes.concat(o.nodes),n},t.crossOver=function(n,o,e){if(n.input!=o.input||n.output!=o.output)throw new Error("Networks don't have the same input/output size!");var s=new t(n.input,n.output);s.connections=[],s.nodes=[];var r=n.score||0,a=o.score||0;if(n=t.fromJSON(n.toJSON()),o=t.fromJSON(o.toJSON()),r==a)var c=Math.max(n.nodes.length,o.nodes.length),h=Math.min(n.nodes.length,o.nodes.length),u=Math.floor(Math.random()*(c-h+1)+h);else if(r>a)var u=n.nodes.length;else var u=o.nodes.length;for(var f=0;f<u;f++)if(f<n.nodes.length&&f<o.nodes.length){var d=null;if(f>=u-n.output)for(;null==d||"output"!=d.type;)d=Math.random()>=.5?n.nodes[f]:o.nodes[f];else for(;null==d||f<u-n.output&&"output"==d.type;)d=Math.random()>=.5?n.nodes[f]:o.nodes[f];s.nodes.push(d)}else f<n.nodes.length?f>=u-n.output?s.nodes.push(n.nodes[n.nodes.length-(f-(u-n.output-1))]):s.nodes.push(n.nodes[f]):f<o.nodes.length&&(f>=u-n.output?s.nodes.push(o.nodes[o.nodes.length-(f-(u-n.output-1))]):s.nodes.push(o.nodes[f]));for(d in s.nodes){var d=s.nodes[d];d.connections={in:[],out:[],self:new i(d,d,0)}}var p={},l={};for(v in n.connections){var v=n.connections[v],g={weight:v.weight,from:n.nodes.indexOf(v.from),to:n.nodes.indexOf(v.to)};if(g.to==n.nodes.length-1){if(!(g.from<u-1))continue;g.to=u-1}var m=i.innovationID(g.from,g.to);p[m]=g}for(v in o.connections){var v=o.connections[v],g={weight:v.weight,from:o.nodes.indexOf(v.from),to:o.nodes.indexOf(v.to)};if(g.to==o.nodes.length-1){if(!(g.from<u-1))continue;g.to=u-1}var m=i.innovationID(g.from,g.to);l[m]=g}var O={};for(var m in p)m in l&&(O[m]=[p[m],l[m]],delete p[m],delete l[m]);var w=[];for(v in O){var v=Math.random()>=.5?O[v][0]:O[v][1];w.push(v)}if(r==a){for(v in p)w.push(p[v]);for(v in l)w.push(l[v])}else if(r>a)for(v in p)w.push(p[v]);else for(v in l)w.push(l[v]);for(v in w){var T=w[v];if(T.to<u){var N=s.nodes[T.from];if("output"!=N.type){var M=s.nodes[T.to],v=s.connect(N,M)[0];v.weight=T.weight}}}return s}}).call(t,o(0)(n))},function(n,t,o){(function(n){var t={LOGISTIC:function(n,o){if(!o)return 1/(1+Math.exp(-n));var e=t.LOGISTIC(n);return e*(1-e)},TANH:function(n,o){return o?1-Math.pow(t.TANH(n),2):Math.tanh(n)},IDENTITY:function(n,t){return t?1:n},HLIM:function(n,t){return t?1:n>0?1:0},RELU:function(n,t){return t?n>0?1:0:n>0?n:0},SOFTSIGN:function(n,t){var o=1+Math.abs(n);return t?n/Math.pow(o,2):n/o},SINUSOID:function(n,t){return t?Math.cos(n):Math.sin(n)},GAUSSIAN:function(n,t){var o=Math.exp(-Math.pow(n,2));return t?-2*n*o:o},SOFTPLUS:function(n,o){return o?t.LOGISTIC(n):Math.log(1+Math.exp(n))},BENT_IDENTITY:function(n,t){var o=Math.sqrt(Math.pow(n,2)+1);return t?n/(2*o)+1:(o-1)/2+n}};n&&(n.exports=t)}).call(t,o(0)(n))},function(n,t,o){(function(n){var t=o(6),e=o(1),i=o(2),s=o(5),r={Construct:function(n){var o=new t(0,0),e=[];for(item in n)if(n[item]instanceof s)for(var r in n[item].nodes)e.push(n[item].nodes[r]);else n[item]instanceof i&&e.push(n[item]);for(var r in e)e[r].connections.out.length+e[r].connections.gated.length==0?(e[r].type="output",o.output++):e[r].connections.in.length||(e[r].type="input",o.input++);if(0==o.input||0==o.output)throw new Error("Given nodes have no clear input/output node!");for(var r in e){for(var a in e[r].connections.out)o.connections.push(e[r].connections.out[a]);for(var a in e[r].connections.gated)o.gates.push(e[r].connections.gated[a]);0!=e[r].connections.self.weight&&o.selfconns.push(e[r].connections.self)}return o.nodes=e,o},Perceptron:function(){var n=Array.prototype.slice.call(arguments);if(n.length<3)throw new Error("not enough layers (minimum 3) !!");var t=[];t.push(new s(n[0]));for(var o=1;o<n.length;o++){var e=n[o],e=new s(e);t.push(e),t[o-1].connect(t[o])}return r.Construct(t)},Random:function(n,o,i,s){s=s||2;for(var r=new t(n,i),a=0;a<o;a++)r.mutate(e.Mutation.ADD_NODE);for(var a=0;a<o*s;a++)r.mutate(e.Mutation.ADD_CONN);return r},LSTM:function(){var n=Array.prototype.slice.call(arguments);if(n.length<3)throw new Error("not enough layers (minimum 3) !!");var t=n.pop();if("number"==typeof t){var o=new s(t);t={}}else var o=new s(n.pop());var i={};i.memoryToMemory=t.memoryToMemory||!1,i.outputToMemory=t.outputToMemory||!1,i.outputToGates=t.outputToGates||!1,i.inputToOutput=t.inputToOutput||!0;var a=new s(n.shift()),c=n,h=[];h.push(a);var u=null;for(var f in c){f=c[f];var d=new s(f),p=new s(f),l=new s(f),v=new s(f);d.set({bias:1}),p.set({bias:1}),v.set({bias:1});var g=a.connect(l);a.connect(d),a.connect(v),a.connect(p),l.connect(d),l.connect(p),l.connect(v);var m=l.connect(l),O=l.connect(o);d.gate(g,e.Gating.INPUT),p.gate(m,e.Gating.SELF),v.gate(O,e.Gating.OUTPUT),null!=u&&(u.connect(l),u.connect(d),u.connect(p),u.connect(v)),i.memoryToMemory&&l.connect(l,e.Connection.ALL_TO_ELSE),i.outputToMemory&&o.connect(l),i.outputToGates&&(o.connect(d),o.connect(p),o.connect(v)),h.push(d),h.push(p),h.push(l),h.push(v),u=l}return i.inputToOutput&&a.connect(o),h.push(o),r.Construct(h)},Hopfield:function(n){var o=new t(n,n);return o.learn=function(n){var t=[];for(var e in n)t.push({input:n[e],output:n[e]});return o.train(t,{iterations:5e5,error:5e-5,rate:1})},o.feed=function(n){var t=this.activate(n),n=[];for(var o in t)n[o]=t[o]>=.5?1:0;return n},o}};n&&(n.exports=r)}).call(t,o(0)(n))},function(n,t,o){(function(n){function t(n,t,o,s){this.input=n,this.output=t,this.fitness=o,s=s||{},this.equal=s.equal||!1,this.popsize=s.popsize||50,this.elitism=s.elitism||0,this.mutation=s.mutation||Object.keys(i.Mutation).map(function(n){return i.Mutation[n]}),this.selection=s.selection||Object.keys(i.Selection).map(function(n){return i.Selection[n]}),this.crossover=s.crossover||Object.keys(i.Crossover).map(function(n){return i.Crossover[n]}),this.mutationRate=s.mutationRate||.3,this.mutationAmount=s.mutationAmount||1,this.generation=0,this.createPool(s.network||new e(this.input,this.output))}n&&(n.exports=t);var e=(o(2),o(6)),i=o(1),s=(i.Activation,i.Mutation,i.Selection);i.Crossover;t.prototype={createPool:function(n){this.population=[];for(var t=0;t<this.popsize;t++){var o=e.fromJSON(n.toJSON());this.population.push(o)}},evolve:function(){this.evaluate(),this.sort();for(var n=[],t=0;t<this.elitism;t++)n.push(this.population[t]);for(var t=0;t<this.popsize-this.elitism;t++)n.push(this.getOffspring());this.population=n,this.mutate(),this.generation++},getOffspring:function(){parent1=this.getParent(),parent2=this.getParent(),1==this.equal&&(parent1.score=0,parent2.score=0);var n=this.crossover[Math.floor(Math.random()*this.crossover.length)];return e.crossOver(parent1,parent2,n)},mutate:function(){for(genome in this.population)if(Math.random()<=this.mutationRate)for(var n=0;n<this.mutationAmount;n++){var t=this.mutation[Math.floor(Math.random()*this.mutation.length)];this.population[genome].mutate(t)}},evaluate:function(){for(genome in this.population){var n=this.fitness(this.population[genome]);this.population[genome].score=n}},sort:function(){this.population.sort(function(n,t){return t.score-n.score})},getFittest:function(){return void 0===this.population[this.population.length-1].score&&this.evaluate(),this.sort(),this.population[0]},getAverage:function(){void 0===this.population[this.population.length-1].score&&this.evaluate();var n=0;for(genome in this.population)n+=this.population[genome].score;return n/this.popsize},getParent:function(){switch(this.selection[Math.floor(Math.random()*this.selection.length)]){case s.FITNESS_PROPORTIONATE:var n=Math.floor(s.FITNESS_PROPORTIONATE.config(Math.random())*this.popsize);return this.population[n]}}}}).call(t,o(0)(n))},function(n,t,o){(function(n){var t={ALL_TO_ALL:{name:"OUTPUT"},ALL_TO_ELSE:{name:"INPUT"},ONE_TO_ONE:{name:"SELF"}};n&&(n.exports=t)}).call(t,o(0)(n))},function(n,t,o){(function(n){var t={CROSS_ENTROPY:function(n,t){var o=0;for(var e in t)o-=n[e]*Math.log(t[e]+1e-15)+(1-n[e])*Math.log(1+1e-15-t[e]);return o},MSE:function(n,t){var o=0;for(var e in t)o+=Math.pow(n[e]-t[e],2);return o/t.length},BINARY:function(n,t){var o=0;for(var e in t)o+=Math.round(2*n[e])!=Math.round(2*t[e]);return o}};n&&(n.exports=t)}).call(t,o(0)(n))},function(n,t,o){(function(n){var t={SINGLE_POINT:{name:"SINGLE_POINT",config:[.4]},TWO_POINT:{name:"TWO_POINT",config:[.4,.9]},UNIFORM:{name:"UNIFORM"},AVERAGE:{name:"AVERAGE"}};n&&(n.exports=t)}).call(t,o(0)(n))},function(n,t,o){(function(n){var t={OUTPUT:{name:"OUTPUT"},INPUT:{name:"INPUT"},SELF:{name:"SELF"}};n&&(n.exports=t)}).call(t,o(0)(n))},function(n,t,o){(function(n){var t=o(7),e={ADD_NODE:{name:"ADD_NODE"},SUB_NODE:{name:"SUB_NODE"},ADD_CONN:{name:"ADD_CONN"},SUB_CONN:{name:"REMOVE_CONN"},MOD_WEIGHT:{name:"MOD_WEIGHT",config:{min:-1,max:1}},MOD_BIAS:{name:"MOD_BIAS",config:{min:-1,max:1}},MOD_ACTIVATION:{name:"MOD_ACTIVATION",config:{allowed:[t.LOGISTIC,t.TANH,t.RELU,t.IDENTITY,t.HLIM,t.SOFTSIGN,t.SINUSOID,t.GAUSSIAN,t.SOFTPLUS,t.BENT_IDENTITY]}}};n&&(n.exports=e)}).call(t,o(0)(n))},function(n,t,o){(function(n){var t={FITNESS_PROPORTIONATE:{name:"FITNESS_PROPORTIONATE",config:function(n){return Math.pow(n,2)}}};n&&(n.exports=t)}).call(t,o(0)(n))},function(n,t,o){var e,i,s={Node:o(2),Neat:o(9),Network:o(6),Methods:o(1),Architect:o(8),Group:o(5),Connection:o(3),Config:o(4)};e=[],void 0!==(i=function(){return s}.apply(t,e))&&(n.exports=i),void 0!==n&&n.exports&&(n.exports=s),"object"==typeof window&&(!function(){var n=window.neataptic;s.ninja=function(){return window.neataptic=n,s}}(),window.neataptic=s)}]);